applications:
  - appuio-cloud-reporting

parameters:
  appuio_cloud_reporting:
    database:
      url: postgres://$(DB_USER):$(DB_PASSWORD)@$(DB_HOST):$(DB_PORT)/$(DB_NAME)?$(DB_PARAMS)
      parameters: ''
    database_secret: {}
    database_env:
      DB_USER:
        secretKeyRef:
          name: reporting-db-prod-cred
          key: POSTGRESQL_USER
      DB_PASSWORD:
        secretKeyRef:
          name: reporting-db-prod-cred
          key: POSTGRESQL_PASSWORD
      DB_HOST:
        secretKeyRef:
          name: reporting-db-prod-cred
          key: POSTGRESQL_HOST
      DB_PORT:
        secretKeyRef:
          name: reporting-db-prod-cred
          key: POSTGRESQL_PORT
      DB_NAME:
        secretKeyRef:
          name: reporting-db-prod-cred
          key: POSTGRESQL_DB

    extra_volumes:
      dbsecret:
        mount_spec:
          readOnly: true
          mountPath: /secrets/database
        volume_spec:
          secret:
            secretName: reporting-db-prod-cred
            defaultMode: 0600

  billing_collector_cloudservices:
    exoscale:
      enabled: true
      dbaas:
        enabled: true
