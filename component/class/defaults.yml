parameters:
  billing_collector_cloudservices:
    =_metadata:
      multi_instance: true

    namespace: appuio-cloud-reporting

    secrets:
      exoscale:
        credentials:
          stringData:
            EXOSCALE_API_KEY: "?{vaultkv:${cluster:tenant}/${cluster:name}/billing-collector-cloudservices/${_instance}/exoscale-key}"
            EXOSCALE_API_SECRET: "?{vaultkv:${cluster:tenant}/${cluster:name}/billing-collector-cloudservices/${_instance}/exoscale-secret}"
      cloudscale:
        credentials:
          stringData:
            CLOUDSCALE_API_TOKEN: "?{vaultkv:${cluster:tenant}/${cluster:name}/billing-collector-cloudservices/${_instance}/token}"
    images:
      collector:
        registry: 'ghcr.io'
        repository: 'vshn/billing-collector-cloudservices'
        tag: change_exporter

    appuioManaged: true
    tenantID: ${cluster:tenant}

    exoscale:
      enabled: false
      # Exoscale metrics are generally fast
      # and we are less likely to miss and dbaas instances
      intervall: 60

    cloudscale:
      enabled: false
      # cloudscale.ch queries are rather slow.
      # Also the metrics are fetched for the previous day, the won't change often.
      intervall: 600
